<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ukrainian Cyborgs: Project X</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <style>
        /* --- CYBERPUNK THEME UPDATED --- */
        :root {
            --primary: #00BFFF;
            --accent: #FFD700;
            --bg-dark: #050505;
            --card-bg: #141414;
            --danger: #ff3b30;
            --rare: #bf00ff;
        }

        body {
            font-family: 'Courier New', monospace;
            background-color: var(--bg-dark);
            color: #fff; margin: 0; padding: 0;
            display: flex; flex-direction: column; align-items: center;
            height: 100vh; overflow: hidden;
            user-select: none; -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            padding-bottom: 90px;
            padding-top: 40px; /* –ú—ñ—Å—Ü–µ –¥–ª—è Squad Header */
        }

        /* –§–û–ù –¢–ê –ï–§–ï–ö–¢–ò */
        .bg-fx {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, #112, #000);
            z-index: -2; transition: background 0.5s;
        }
        
        /* –ï—Ñ–µ–∫—Ç –±—É—Å—Ç—É (–≤—ñ–π–Ω–∞/—á–µ—Ä–≤–æ–Ω–∏–π) */
        .bg-fx.turbo-mode {
            background: repeating-linear-gradient(
                45deg,
                #1a0000,
                #1a0000 10px,
                #000 10px,
                #000 20px
            );
            animation: warAlert 2s infinite;
        }
        @keyframes warAlert {
            0% { box-shadow: inset 0 0 50px #500; }
            50% { box-shadow: inset 0 0 150px #f00; }
            100% { box-shadow: inset 0 0 50px #500; }
        }

        /* HEADER –ö–û–ú–ê–ù–î–ò */
        .squad-header {
            position: fixed; top: 0; left: 0; width: 100%; height: 40px;
            background: rgba(20,20,20,0.95); border-bottom: 1px solid #333;
            display: flex; justify-content: center; align-items: center;
            z-index: 50; font-size: 12px; color: #888; gap: 10px;
        }
        .squad-link { color: var(--primary); text-decoration: none; font-weight: bold; display: flex; align-items: center; gap: 5px; }

        /* –Ü–ù–¢–†–û */
        #intro-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999; display: flex; 
            flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.5s;
        }
        .intro-msg { color: var(--primary); font-size: 18px; letter-spacing: 2px; animation: blink 1s infinite; text-align: center; }
        @keyframes blink { 50% { opacity: 0.5; } }

        /* –ì–û–õ–û–í–ù–ò–ô –ï–ö–†–ê–ù */
        .container { width: 100%; max-width: 420px; padding: 15px; box-sizing: border-box; text-align: center; z-index: 1; }

        h1 { font-family: sans-serif; font-size: 20px; color: var(--accent); text-transform: uppercase; letter-spacing: 2px; margin-top: 5px; text-shadow: 0 0 10px var(--accent); }

        .balance-val { font-size: 46px; font-weight: 800; font-family: sans-serif; text-shadow: 0 0 15px var(--primary); }
        .balance-sub { font-size: 12px; color: #888; letter-spacing: 1px; }

        /* –ö–ù–û–ü–ö–ê-–¢–†–ò–ó–£–ë */
        .clicker-area {
            flex-grow: 1; display: flex; justify-content: center; align-items: center;
            margin: 10px 0; position: relative;
        }
        .main-btn {
            width: 280px; height: 280px; border-radius: 50%;
            background: radial-gradient(circle, #152b3c, #000);
            border: 3px solid #333;
            box-shadow: 0 0 30px rgba(0, 191, 255, 0.1);
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; position: relative; overflow: hidden;
            transition: transform 0.05s;
        }
        .main-btn:active { transform: scale(0.96); border-color: var(--accent); }

        /* SVG –¢–†–ò–ó–£–ë */
        .trident-svg { width: 70%; height: 70%; filter: drop-shadow(0 0 15px var(--primary)); transition: filter 0.3s; }
        @keyframes breathe { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.03); } }
        .trident-anim { animation: breathe 3s infinite ease-in-out; }

        /* –ï–ù–ï–†–ì–Ü–Ø */
        .energy-bar {
            width: 100%; height: 10px; background: #222; border-radius: 5px;
            overflow: hidden; margin-top: 15px; border: 1px solid #444;
        }
        .energy-fill { height: 100%; background: linear-gradient(90deg, var(--primary), #0055ff); width: 100%; transition: width 0.3s; }
        .energy-info { display: flex; justify-content: space-between; font-size: 12px; color: #ccc; margin-top: 5px; font-family: sans-serif; }

        /* –ê–í–¢–û-–ë–û–¢ –ü–ê–ù–ï–õ–¨ */
        .bot-panel {
            background: rgba(0, 191, 255, 0.15); border: 1px solid var(--primary);
            border-radius: 12px; padding: 10px 15px; margin-bottom: 15px;
            display: none; justify-content: space-between; align-items: center;
        }

        /* –¶–ò–§–†–ò (+1) */
        .floating-txt {
            position: absolute; color: #fff; font-weight: 900; font-size: 36px;
            text-shadow: 0 0 10px var(--primary), 0 0 20px var(--primary);
            pointer-events: none; z-index: 1000;
            animation: floatUp 0.6s ease-out forwards;
        }
        @keyframes floatUp { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-100px) scale(1.5); opacity: 0; } }

        /* –ù–ê–í–Ü–ì–ê–¶–Ü–Ø */
        .nav-bar {
            position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%);
            width: 94%; max-width: 400px; background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px); border-radius: 20px; border: 1px solid #333;
            display: flex; justify-content: space-between; padding: 10px 15px; z-index: 100; box-sizing: border-box;
        }
        .nav-btn { background: none; border: none; color: #666; font-size: 10px; display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .nav-btn.active { color: var(--accent); }
        .nav-icon { font-size: 20px; margin-bottom: 4px; }

        /* –ú–û–î–ê–õ–ö–ò */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; justify-content: center; align-items: flex-end; }
        .modal-card { background: #111; width: 100%; max-width: 500px; border-radius: 25px 25px 0 0; padding: 25px; max-height: 85vh; overflow-y: auto; border-top: 2px solid var(--primary); position: relative; padding-bottom: 50px; }
        .close-btn { position: absolute; top: 20px; right: 20px; font-size: 24px; color: #666; cursor: pointer; }
        
        .upg-row { display: flex; justify-content: space-between; align-items: center; background: #1a1a1a; padding: 15px; border-radius: 12px; margin-bottom: 10px; border: 1px solid #333; }
        .btn { background: var(--primary); color: #000; border: none; padding: 8px 16px; border-radius: 8px; font-weight: bold; font-size: 12px; cursor: pointer; }
        .btn:disabled { background: #333; color: #555; cursor: not-allowed; }
        .btn-full { width: 100%; padding: 12px; margin-top: 10px; font-size: 14px; }
        
        /* –°–¢–ò–õ–Ü –î–õ–Ø –ü–û–î–ê–†–£–ù–ö–ê (GIFT BOX) */
        #gift-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 3000;
            display: none; justify-content: center; align-items: center; flex-direction: column;
        }
        .gift-box {
            font-size: 80px; cursor: pointer;
            animation: shake 2s infinite;
            filter: drop-shadow(0 0 30px var(--accent));
        }
        @keyframes shake { 
            0% { transform: rotate(0deg); } 
            25% { transform: rotate(5deg); } 
            50% { transform: rotate(0deg); } 
            75% { transform: rotate(-5deg); } 
            100% { transform: rotate(0deg); }
        }
        .gift-open { animation: popOut 0.5s forwards; }
        @keyframes popOut { 0% { transform: scale(1); } 50% { transform: scale(1.4); } 100% { transform: scale(0); opacity: 0; } }
        
        .turbo-msg { font-size: 40px; color: var(--danger); font-weight: 900; text-transform: uppercase; display: none; animation: zoomIn 0.3s forwards; text-shadow: 0 0 20px red; }
        @keyframes zoomIn { from { transform: scale(0); } to { transform: scale(1); } }

        /* INPUT –î–õ–Ø –°–¢–ï–ô–ö–Ü–ù–ì–£ */
        .input-field {
            width: 100%; background: #000; border: 1px solid #333; color: #fff;
            padding: 12px; border-radius: 8px; box-sizing: border-box; font-family: inherit; margin: 10px 0;
        }

        .task-item {
            background: #181818; border: 1px solid #333; padding: 15px; border-radius: 12px; margin-bottom: 10px;
            display: flex; align-items: center; justify-content: space-between;
        }
    </style>
</head>
<body>

    <div class="squad-header">
        <span>SQUAD:</span>
        <a href="javascript:void(0)" onclick="openTelegramChannel()" class="squad-link">
            @ucbgcoin <span style="font-size:10px;">üõ°Ô∏è</span>
        </a>
    </div>

    <div id="intro-layer" onclick="startGame()">
        <div class="intro-msg">
            SYSTEM DETECTED<br>
            <span style="font-size:12px; color:#555; margin-top:10px; display:block;">[ TAP TO INITIALIZE ]</span>
        </div>
    </div>

    <div class="bg-fx" id="bgFx"></div>

    <div id="gift-overlay">
        <div style="color:#fff; margin-bottom:20px; letter-spacing:2px;">SECRET SUPPLY DROP</div>
        <div class="gift-box" id="giftBox" onclick="openGift()">üéÅ</div>
        <div class="turbo-msg" id="turboMsg">x10</div>
    </div>

    <div class="container">
        <h1 id="ui_title">UKRAINIAN CYBORGS</h1>

        <div style="margin: 20px 0;">
            <div class="balance-val" id="displayBalance">0</div>
            <div class="balance-sub">UCBG COIN</div>
        </div>

        <div id="turboTimer" style="display:none; color:var(--danger); font-weight:bold; margin-bottom:10px; font-size:18px; text-shadow: 0 0 10px red;"></div>

        <div class="bot-panel" id="botPanel">
            <div style="display:flex; align-items:center; gap:10px;">
                <span style="font-size:24px;">ü§ñ</span>
                <div style="text-align:left;">
                    <div style="font-size:12px; color:#aaa;">–ê–≤—Ç–æ-–ë–æ—Ç</div>
                    <div style="font-family:monospace; font-weight:bold;" id="botTimer">04:00:00</div>
                </div>
            </div>
            <button class="btn" id="claimBotBtn" onclick="claimBot()">CLAIM</button>
        </div>

        <div class="clicker-area">
            <div class="main-btn" id="tapBtn">
                <svg class="trident-svg trident-anim" id="tridentSvg" viewBox="0 0 512 512">
                    <defs>
                        <linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#00BFFF;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#FFD700;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="gradRocket" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#ff3b30;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#ff9f0a;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path id="tridentPath" fill="url(#grad1)" d="M256 32C242.7 32 232 42.7 232 56V192C232 222.9 206.9 248 176 248C145.1 248 120 222.9 120 192V88C120 74.7 109.3 64 96 64C82.7 64 72 74.7 72 88V192C72 249.4 118.6 296 176 296H200V424H152C138.7 424 128 434.7 128 448C128 461.3 138.7 472 152 472H360C373.3 472 384 461.3 384 448C384 434.7 373.3 424 360 424H312V296H336C393.4 296 440 249.4 440 192V88C440 74.7 429.3 64 416 64C402.7 64 392 74.7 392 88V192C392 222.9 366.9 248 336 248C305.1 248 280 222.9 280 192V56C280 42.7 269.3 32 256 32z"/>
                </svg>
            </div>
        </div>

        <div class="energy-bar"><div class="energy-fill" id="energyFill"></div></div>
        <div class="energy-info">
            <span>‚ö° <span id="enVal">1000</span> / <span id="enMax">1000</span></span>
            <span id="regenState" style="color:var(--primary); display:none;">Charging...</span>
        </div>
    </div>

    <div class="nav-bar">
        <button class="nav-btn active" onclick="closeModals()"><div class="nav-icon">üè†</div>Base</button>
        <button class="nav-btn" onclick="openModal('earnModal')"><div class="nav-icon">üì°</div>Earn</button>
        <button class="nav-btn" onclick="openModal('upgModal')"><div class="nav-icon">üõ†</div>Arsenal</button>
        <button class="nav-btn" onclick="openModal('friendsModal')"><div class="nav-icon">üë•</div>Team</button>
        <button class="nav-btn" onclick="openModal('walletModal')"><div class="nav-icon">üíé</div>Wallet</button>
    </div>

    <div id="upgModal" class="modal">
        <div class="modal-card">
            <span class="close-btn" onclick="closeModals()">&times;</span>
            <h2>–ê–†–°–ï–ù–ê–õ & –ë–£–°–¢–ò</h2>
            
            <div class="upg-row" style="border-color:var(--accent);">
                <div>
                    <div style="font-size:14px; font-weight:bold; color:var(--accent);">ü§ñ –ê–≤—Ç–æ-–ë–æ—Ç</div>
                    <div style="font-size:10px; color:#888;">–ó–±–∏—Ä–∞—î –ø–æ–∫–∏ —Ç–∏ –æ—Ñ–ª–∞–π–Ω (4 –≥–æ–¥)</div>
                </div>
                <button class="btn" id="buyBotBtn" onclick="buyBot()">50,000</button>
            </div>

            <div class="upg-row" style="border-color:var(--danger);">
                <div>
                    <div style="font-size:14px; font-weight:bold; color:var(--danger);">üöÄ SECRET DROP (x?)</div>
                    <div style="font-size:10px; color:#888;">–†–∞–Ω–¥–æ–º–Ω–∏–π –º–Ω–æ–∂–Ω–∏–∫. 3 —Å–ø—Ä–æ–±–∏/–¥–µ–Ω—å.</div>
                    <div style="font-size:10px; color:#fff;" id="rocketStock">–î–æ—Å—Ç—É–ø–Ω–æ: 3/3</div>
                </div>
                <button class="btn" style="background:var(--danger); color:#fff;" onclick="tryActivateRocket()">START</button>
            </div>

            <hr style="border-color:#333; margin:15px 0;">
            <h3 style="font-size:14px; color:#666; margin-bottom:10px;">SYSTEM UPGRADES</h3>
            <div id="upgradesList"></div>
        </div>
    </div>

    <div id="earnModal" class="modal">
        <div class="modal-card">
            <span class="close-btn" onclick="closeModals()">&times;</span>
            <h2>–°–ü–ï–¶–ó–ê–í–î–ê–ù–ù–Ø</h2>
            <p style="font-size:12px; color:#888; margin-bottom:20px;">–í–∏–∫–æ–Ω—É–π –º—ñ—Å—ñ—ó —à—Ç–∞–±—É - –æ—Ç—Ä–∏–º—É–π —Ñ—ñ–Ω–∞–Ω—Å—É–≤–∞–Ω–Ω—è.</p>

            <div class="task-item" id="task_sub">
                <div style="display:flex; align-items:center; gap:10px;">
                    <div style="font-size:24px;">üì¢</div>
                    <div style="text-align:left;">
                        <div style="font-weight:bold; color:#fff;">–ü—ñ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª</div>
                        <div style="font-size:11px; color:var(--primary);">@ucbgcoin</div>
                        <div style="font-size:12px; color:var(--accent); margin-top:2px;">+1,000,000 UCBG</div>
                    </div>
                </div>
                <button class="btn" id="btnSubTask" onclick="checkSubTask()">Go</button>
            </div>
            
            <div style="text-align:center; color:#444; font-size:10px; margin-top:20px;">–ë—ñ–ª—å—à–µ –∑–∞–≤–¥–∞–Ω—å —Å–∫–æ—Ä–æ...</div>
        </div>
    </div>

    <div id="friendsModal" class="modal"><div class="modal-card"><span class="close-btn" onclick="closeModals()">&times;</span><h2>–ë—Ä–∏–≥–∞–¥–∞</h2><p style="color:#888;">+2500 –∑–∞ —Ä–µ–∫—Ä—É—Ç–∞</p><button class="btn btn-full" onclick="invite()">–ó–∞–ø—Ä–æ—Å–∏—Ç–∏ –î—Ä—É–≥–∞</button></div></div>

    <div id="walletModal" class="modal">
        <div class="modal-card">
            <span class="close-btn" onclick="closeModals()">&times;</span>
            <h2>–§–Ü–ù–ê–ù–°–ò</h2>
            
            <div style="background:#1a1a1a; padding:15px; border-radius:12px; margin-bottom:20px; text-align:center;">
                 <div style="font-size:12px; color:#888;">TON Wallet Connect</div>
                 <div id="ton-btn" style="margin-top:10px; display:flex; justify-content:center;"></div>
            </div>

            <div style="border:1px dashed var(--primary); padding:15px; border-radius:12px; margin-bottom:15px;">
                <h3 style="margin:0 0 10px 0; color:var(--accent);">üíé AIRDROP / PRESALE STAKING</h3>
                <p style="font-size:10px; color:#ccc; line-height:1.4;">
                    –í–Ω–µ—Å—ñ—Ç—å TON —É —Ñ–æ–Ω–¥ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –ø—Ä–æ–µ–∫—Ç—É. –í–∞–ª—é—Ç–∞ –∫–æ–Ω–≤–µ—Ä—Ç—É—î—Ç—å—Å—è –≤ UCBG (–∫—É—Ä—Å 1 UCBG = $1 –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç).
                    –ú–æ–Ω–µ—Ç–∏ –±—É–¥—É—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ñ –¥–æ –∫—ñ–Ω—Ü—è –ø—Ä–æ–µ–∫—Ç—É.
                </p>
                
                <input type="number" id="stakeInput" class="input-field" placeholder="–°—É–º–∞ TON (–º—ñ–Ω. 0.5)">
                <button class="btn btn-full" style="background:linear-gradient(45deg, #0088cc, #0055ff); color:#fff;" onclick="processDonation()">
                    SEND TO STAKING POOL
                </button>
                <div style="font-size:9px; color:#555; margin-top:5px; text-align:center;">Mini Crypto-Exchange Protocol v1.0</div>
            </div>

            <div style="background:#222; padding:10px; border-radius:8px;">
                <div style="display:flex; justify-content:space-between; font-size:12px; margin-bottom:5px;">
                    <span style="color:#888;">Total Staked:</span>
                    <span id="stakedAmount">0 TON</span>
                </div>
                <div style="display:flex; justify-content:space-between; font-size:12px;">
                    <span style="color:#888;">Unlock Date:</span>
                    <span>05.02.2026</span>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø ---
        const TG = window.Telegram.WebApp;
        TG.expand(); TG.setHeaderColor('#050505');

        // –ê–¥—Ä–µ—Å–∞ –≥–∞–º–∞–Ω—Ü—è –ø—Ä–æ–µ–∫—Ç—É –¥–ª—è "Presale/Staking" (–í–°–¢–ê–í–¢–ï –°–Æ–î–ò –°–í–Ü–ô –ì–ê–ú–ê–ù–ï–¶–¨)
        const OWNER_WALLET = "UQD2...CHANGE_THIS_TO_YOUR_WALLET_ADDRESS...xxxx"; 

        // –ó–í–£–ö (Base64 short blip)
        const clickSnd = new Audio("data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YTvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv

        // –ï–ª–µ–º–µ–Ω—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
        const elBalance = document.getElementById('displayBalance');
        const elEnergyFill = document.getElementById('energyFill');
        const elEnVal = document.getElementById('enVal');
        const elEnMax = document.getElementById('enMax');
        const elRegenState = document.getElementById('regenState');
        const elBotPanel = document.getElementById('botPanel');
        const elBotTimer = document.getElementById('botTimer');
        const elClaimBtn = document.getElementById('claimBotBtn');
        const elTurbo = document.getElementById('turboTimer');
        const elTapBtn = document.getElementById('tapBtn');
        const elIntro = document.getElementById('intro-layer');
        const elTridentSvg = document.getElementById('tridentSvg');
        const elTridentPath = document.getElementById('tridentPath');
        const elBgFx = document.getElementById('bgFx');
        const elRocketStock = document.getElementById('rocketStock');

        // –°–¢–ê–ù –ì–†–ò
        let game = {
            balance: 0,
            energy: 1000,
            hasPlayed: false,
            hasBot: false,
            botStartTime: 0,
            turboEnd: 0,
            turboMult: 1, // –ü–æ—Ç–æ—á–Ω–∏–π –º–Ω–æ–∂–Ω–∏–∫ –±—É—Å—Ç—É
            clickCount: 0,
            dailyBoosts: { count: 3, lastReset: 0 }, // –ù–æ–≤–µ
            tasks: { sub: false }, // –ù–æ–≤–µ
            staking: { total: 0 }, // –ù–æ–≤–µ
            upgrades: {
                tap: { lvl: 1, base: 500, factor: 2, val: 1 },
                eng: { lvl: 1, base: 500, factor: 2, val: 1000 },
                reg: { lvl: 1, base: 1000, factor: 2.5, val: 2 }
            }
        };

        // --- –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø ---
        function init() {
            loadGame();
            
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–º—ñ–Ω–∏ –¥–æ–±–∏ –¥–ª—è —Å–∫–∏–¥–∞–Ω–Ω—è –±—É—Å—Ç—ñ–≤
            let today = new Date().toDateString();
            if(game.dailyBoosts.lastReset !== today) {
                game.dailyBoosts.count = 3;
                game.dailyBoosts.lastReset = today;
                saveGame();
            }

            // –ë–æ–Ω—É—Å –∑–∞ –ø–µ—Ä—à–∏–π –≤—Ö—ñ–¥
            if (!game.hasPlayed) {
                game.balance = 5000;
                game.hasPlayed = true;
                saveGame();
            }

            updateUI();
            renderUpgrades();
            checkTaskState();

            // –û—Å–Ω–æ–≤–Ω–∏–π —Ü–∏–∫–ª (1—Å)
            setInterval(() => {
                regenEnergy();
                updateBot();
                checkTurbo();
            }, 1000);

            // –°–∫–∏–¥–∞–Ω–Ω—è –∞–Ω—Ç–∏-—á—ñ—Ç–∞
            setInterval(() => { game.clickCount = 0; }, 2000);

            // TON Connect
            window.tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
                manifestUrl: 'https://raw.githubusercontent.com/ton-community/tutorials/main/03-client/test/public/tonconnect-manifest.json',
                buttonRootId: 'ton-btn'
            });
        }

        // --- –û–°–ù–û–í–ù–ê –õ–û–ì–Ü–ö–ê ---

        window.startGame = () => {
            elIntro.style.opacity = '0';
            clickSnd.play().catch(()=>{}); 
            setTimeout(() => elIntro.style.display = 'none', 500);
        };
        
        window.openTelegramChannel = () => TG.openTelegramLink("https://t.me/ucbgcoin");

        // –ö–ª—ñ–∫
        elTapBtn.addEventListener('pointerdown', (e) => {
            e.preventDefault();

            if(game.clickCount > 40) return; // –ê–Ω—Ç–∏-—á—ñ—Ç
            
            let basePower = game.upgrades.tap.val + (game.upgrades.tap.lvl - 1);
            let power = basePower;

            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç—É—Ä–±–æ
            let isTurbo = Date.now() < game.turboEnd;
            if (isTurbo) power *= game.turboMult;

            if (game.energy >= basePower || isTurbo) {
                // –í —Ä–µ–∂–∏–º—ñ —Ç—É—Ä–±–æ –µ–Ω–µ—Ä–≥—ñ—è –Ω–µ –≤–∏—Ç—Ä–∞—á–∞—î—Ç—å—Å—è
                if(!isTurbo) game.energy -= basePower;
                
                game.balance += power;
                game.clickCount++;
                
                playSound();
                if(TG.HapticFeedback) TG.HapticFeedback.impactOccurred(isTurbo ? 'heavy' : 'light');

                // –ê–Ω—ñ–º–∞—Ü—ñ—è
                elTapBtn.style.transform = "scale(0.95)";
                setTimeout(() => elTapBtn.style.transform = "scale(1)", 50);

                showFloatingText(e.clientX, e.clientY, `+${power}`);

                updateUI();
                saveGame();
            }
        });

        function playSound() {
            let audio = clickSnd.cloneNode();
            audio.volume = 0.3;
            audio.play().catch(()=>{});
        }

        function showFloatingText(x, y, txt) {
            let el = document.createElement('div');
            el.className = 'floating-txt';
            el.textContent = txt;
            el.style.left = (x - 20) + 'px';
            el.style.top = (y - 40) + 'px';
            if(Date.now() < game.turboEnd) el.style.color = "#ff3b30"; // –ß–µ—Ä–≤–æ–Ω–∏–π —Ç–µ–∫—Å—Ç –≤ —Ç—É—Ä–±–æ
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 600);
        }

        function regenEnergy() {
            if(Date.now() < game.turboEnd) return; // –ù–µ —Ä–µ–≥–µ–Ω–∏—Ç–∏ –≤ —Ç—É—Ä–±–æ
            let max = game.upgrades.eng.val;
            if (game.energy < max) {
                game.energy = Math.min(max, game.energy + game.upgrades.reg.val);
                updateUI();
            }
        }

        // --- –ó–ê–í–î–ê–ù–ù–Ø ---
        window.checkSubTask = () => {
            if(game.tasks.sub) return;
            
            let btn = document.getElementById('btnSubTask');
            btn.textContent = "Checking...";
            btn.disabled = true;

            TG.openTelegramLink("https://t.me/ucbgcoin");

            // –°–∏–º—É–ª—è—Ü—ñ—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ (5 —Å–µ–∫)
            setTimeout(() => {
                game.tasks.sub = true;
                game.balance += 1000000;
                TG.showAlert("Mission Complete! +1,000,000 UCBG");
                saveGame();
                updateUI();
                checkTaskState();
            }, 5000);
        };

        function checkTaskState() {
            let el = document.getElementById('task_sub');
            let btn = document.getElementById('btnSubTask');
            if(game.tasks && game.tasks.sub) {
                el.style.opacity = '0.5';
                el.style.borderColor = 'var(--primary)';
                btn.textContent = "DONE";
                btn.style.background = "#333";
                btn.disabled = true;
            }
        }

        // --- –ü–û–ö–†–ê–©–ï–ù–ù–Ø ---
        function renderUpgrades() {
            const list = document.getElementById('upgradesList');
            list.innerHTML = '';
            const items = [
                { id: 'tap', name: "Cyber Arm", desc: "–°–∏–ª–∞ —É–¥–∞—Ä—É (+1)" },
                { id: 'eng', name: "Battery Pack", desc: "–û–±'—î–º –±–∞–∫—É (+500)" },
                { id: 'reg', name: "Reactor", desc: "–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è (+2/s)" }
            ];

            items.forEach(i => {
                let u = game.upgrades[i.id];
                let cost = Math.floor(u.base * Math.pow(u.factor, u.lvl - 1));
                
                list.innerHTML += `
                <div class="upg-row">
                    <div>
                        <div style="font-size:14px; font-weight:bold;">${i.name} <span style="color:var(--primary)">Lvl ${u.lvl}</span></div>
                        <div style="font-size:10px; color:#888;">${i.desc}</div>
                    </div>
                    <button class="btn" onclick="buy('${i.id}', ${cost})" ${game.balance < cost ? 'disabled' : ''}>
                        ${cost.toLocaleString()}
                    </button>
                </div>`;
            });
            
            // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞ —Ä–∞–∫–µ—Ç
            if(elRocketStock) elRocketStock.textContent = `–î–æ—Å—Ç—É–ø–Ω–æ: ${game.dailyBoosts.count}/3`;
        }

        window.buy = (id, cost) => {
            if(game.balance >= cost) {
                game.balance -= cost; // –í–∏—Ç—Ä–∞—á–∞—î–º–æ –º–æ–Ω–µ—Ç–∏
                game.upgrades[id].lvl++;
                
                if(id === 'eng') game.upgrades.eng.val += 500;
                if(id === 'reg') game.upgrades.reg.val += 2;

                updateUI(); renderUpgrades(); saveGame();
            }
        };

        // --- –ê–í–¢–û-–ë–û–¢ ---
        window.buyBot = () => {
            if(game.balance >= 50000 && !game.hasBot) {
                game.balance -= 50000;
                game.hasBot = true;
                game.botStartTime = Date.now();
                updateUI(); saveGame();
            }
        };

        window.claimBot = () => {
            game.balance += 10000; 
            game.botStartTime = Date.now();
            TG.showAlert("ü§ñ –ë–æ—Ç –∑—ñ–±—Ä–∞–≤ 10,000 UCBG!");
            updateUI(); saveGame();
        };

        function updateBot() {
            if(!game.hasBot) { elBotPanel.style.display = 'none'; return; }
            
            elBotPanel.style.display = 'flex';
            document.getElementById('buyBotBtn').textContent = "OWNED";
            document.getElementById('buyBotBtn').disabled = true;

            const diff = Date.now() - game.botStartTime;
            const limit = 4 * 60 * 60 * 1000; 

            if(diff >= limit) {
                elBotTimer.textContent = "READY TO CLAIM";
                elBotTimer.style.color = "#0f0";
                elClaimBtn.disabled = false;
            } else {
                const left = limit - diff;
                const h = Math.floor(left / 3600000);
                const m = Math.floor((left % 3600000) / 60000);
                const s = Math.floor((left % 60000) / 1000);
                elBotTimer.textContent = `${h}:${m<10?'0'+m:m}:${s<10?'0'+s:s}`;
                elBotTimer.style.color = "#fff";
                elClaimBtn.disabled = true;
            }
        }

        // --- –†–ê–ö–ï–¢–ê / GIFT BOX SYSTEM ---
        window.tryActivateRocket = () => {
            if(game.dailyBoosts.count <= 0) {
                TG.showAlert("–õ—ñ–º—ñ—Ç –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ –≤–∏—á–µ—Ä–ø–∞–Ω–æ! –ß–µ–∫–∞–π—Ç–µ –∑–∞–≤—Ç—Ä–∞.");
                return;
            }
            
            closeModals();
            // –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–¥–∞—Ä—É–Ω–æ–∫
            document.getElementById('gift-overlay').style.display = 'flex';
        };

        window.openGift = () => {
            let box = document.getElementById('giftBox');
            let msg = document.getElementById('turboMsg');
            
            // –ê–Ω—ñ–º–∞—Ü—ñ—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è
            box.classList.add('gift-open');
            
            // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ä–∞–Ω–¥–æ–º–Ω–æ–≥–æ –º–Ω–æ–∂–Ω–∏–∫–∞ (x5, x10, x20, x50)
            let mults = [5, 10, 15, 20, 50];
            let rand = mults[Math.floor(Math.random() * mults.length)];
            game.turboMult = rand;
            
            msg.textContent = `x${rand}`;
            msg.style.display = 'block';

            setTimeout(() => {
                document.getElementById('gift-overlay').style.display = 'none';
                box.classList.remove('gift-open');
                msg.style.display = 'none';
                activateRocketLogic();
            }, 1500);
        };

        function activateRocketLogic() {
            game.dailyBoosts.count--;
            game.turboEnd = Date.now() + 10000; // 10 —Å–µ–∫
            saveGame();
            updateUI();
            renderUpgrades(); // –û–Ω–æ–≤–∏—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –≤ UI
        }

        function checkTurbo() {
            if(Date.now() < game.turboEnd) {
                elTurbo.style.display = 'block';
                elTurbo.textContent = `‚ö†Ô∏è WAR MODE: ${Math.ceil((game.turboEnd - Date.now())/1000)}s`;
                
                // –°—Ç–∏–ª—ñ –≤—ñ–π–Ω–∏
                elBgFx.classList.add('turbo-mode');
                elTapBtn.style.borderColor = 'var(--danger)';
                elTapBtn.style.boxShadow = '0 0 50px var(--danger)';
                elTridentPath.setAttribute('fill', 'url(#gradRocket)');
                
            } else {
                elTurbo.style.display = 'none';
                elBgFx.classList.remove('turbo-mode');
                elTapBtn.style.borderColor = '#333';
                elTapBtn.style.boxShadow = '0 0 30px rgba(0,191,255,0.1)';
                elTridentPath.setAttribute('fill', 'url(#grad1)');
                game.turboMult = 1;
            }
        }

        // --- WALLET & STAKING ---
        window.processDonation = async () => {
            let amount = parseFloat(document.getElementById('stakeInput').value);
            if(!amount || amount < 0.5) {
                TG.showAlert("–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Å—É–º–∞ —Å—Ç–µ–π–∫—ñ–Ω–≥—É: 0.5 TON");
                return;
            }

            const transaction = {
                validUntil: Math.floor(Date.now() / 1000) + 60, // 60 sec
                messages: [
                    {
                        address: OWNER_WALLET, // –ê–¥—Ä–µ—Å–∞ –≤–ª–∞—Å–Ω–∏–∫–∞
                        amount: (amount * 1000000000).toString(), // nanoton
                    }
                ]
            };

            try {
                // –í–∏–∫–ª–∏–∫ –≥–∞–º–∞–Ω—Ü—è TON
                const result = await tonConnectUI.sendTransaction(transaction);
                
                if (result) {
                    TG.showAlert("–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú–æ–Ω–µ—Ç–∏ –±—É–¥—É—Ç—å –Ω–∞—Ä–∞—Ö–æ–≤–∞–Ω—ñ –ø—ñ—Å–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –±–ª–æ–∫—á–µ–π–Ω–æ–º.");
                    // –Ü–º—ñ—Ç–∞—Ü—ñ—è –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –¥–ª—è UI (–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—ñ —Ç—Ä–µ–±–∞ –±–µ–∫–µ–Ω–¥)
                    game.staking.total += amount;
                    // –Ø–∫—â–æ –∫—É—Ä—Å 1$ = 1 –º–æ–Ω–µ—Ç–∞, –∞ TON = 5$ (–ø—Ä–∏–∫–ª–∞–¥), –Ω–∞—Ä–∞—Ö—É—î–º–æ —É–º–æ–≤–Ω–æ
                    // –¢—É—Ç –º–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∂–µ–º–æ, —â–æ TON –ø—Ä–∏–π–Ω—è—Ç–æ
                    document.getElementById('stakeInput').value = '';
                    saveGame();
                    updateUI();
                }
            } catch (e) {
                console.error(e);
                TG.showAlert("–í—ñ–¥–º—ñ–Ω–∞ –∞–±–æ –ø–æ–º–∏–ª–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó.");
            }
        };

        // --- UI UPDATE ---
        function updateUI() {
            elBalance.innerText = Math.floor(game.balance).toLocaleString();
            
            let cur = Math.floor(game.energy);
            let max = game.upgrades.eng.val;
            elEnVal.innerText = cur;
            elEnMax.innerText = max;
            
            let pct = (cur / max) * 100;
            elEnergyFill.style.width = pct + "%";

            if (cur < max && Date.now() > game.turboEnd) {
                elRegenState.style.display = 'block';
                elRegenState.textContent = `‚ö° Charging (+${game.upgrades.reg.val}/s)`;
            } else {
                elRegenState.style.display = 'none';
            }
            
            // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–µ–π–∫—ñ–Ω–≥—É
            let stakedEl = document.getElementById('stakedAmount');
            if(stakedEl && game.staking) {
                stakedEl.innerText = game.staking.total + " TON";
            }
        }

        window.invite = () => TG.openTelegramLink("https://t.me/share/url?url=https://t.me/ucbgcoin_bot&text=–ü—Ä–∏—î–¥–Ω—É–π—Å—è –¥–æ –ö—ñ–±–æ—Ä–≥—ñ–≤! –û—Ç—Ä–∏–º–∞–π –±–æ–Ω—É—Å.");
        
        window.openModal = (id) => {
            document.getElementById(id).style.display = 'flex';
            if(id === 'upgModal') renderUpgrades();
            if(id === 'earnModal') checkTaskState();
        };
        window.closeModals = () => document.querySelectorAll('.modal').forEach(el => el.style.display = 'none');

        // Save/Load System (v7)
        function saveGame() { localStorage.setItem('ucbg_v7', JSON.stringify(game)); }
        function loadGame() {
            let s = localStorage.getItem('ucbg_v7');
            if(s) {
                let d = JSON.parse(s);
                // –ú–µ—Ä–¥–∂ –¥–∞–Ω–∏—Ö, —â–æ–± —Å—Ç–∞—Ä—ñ —Å–µ–π–≤–∏ –Ω–µ –ª–∞–º–∞–ª–∏—Å—å
                game = {...game, ...d};
                if(!game.dailyBoosts) game.dailyBoosts = { count: 3, lastReset: 0 };
                if(!game.tasks) game.tasks = { sub: false };
                if(!game.staking) game.staking = { total: 0 };
            }
        }

        window.onload = init;
    </script>
</body>
</html>
