<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ukrainian Cyborgs</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <style>
        /* --- CSS –°—Ç–∏–ª—ñ --- */
        :root {
            --primary: #00BFFF;
            --accent: #FFD700;
            --bg-dark: #0d1b2a;
            --card-bg: #1b263b;
            --danger: #ff4444;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--bg-dark);
            color: #e0e0e0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
            user-select: none;
            -webkit-user-select: none;
            padding-bottom: 100px;
        }

        .background-animation {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1b263b 0%, #0d1b2a 100%);
            z-index: -1;
        }

        .container { width: 100%; max-width: 420px; padding: 15px; box-sizing: border-box; text-align: center; }

        /* Header Stats */
        .emission-bar {
            width: 100%; height: 4px; background: #333; margin-top: 5px; border-radius: 2px;
        }
        .emission-fill {
            height: 100%; background: var(--accent); width: 0%; transition: width 0.5s;
        }
        .emission-text { font-size: 10px; color: #666; margin-bottom: 10px; }

        /* Balance */
        .balance-amount { font-size: 40px; font-weight: 800; color: #fff; margin: 10px 0; }
        .real-token-est { font-size: 12px; color: var(--primary); margin-bottom: 20px; }

        /* Main Button */
        .main-circle {
            width: 260px; height: 260px; border-radius: 50%;
            background: radial-gradient(circle, #005a8d, #0d1b2a);
            border: 5px solid #3a3a60;
            display: flex; justify-content: center; align-items: center;
            margin: 0 auto; position: relative; cursor: pointer; overflow: hidden;
            transition: transform 0.05s;
            -webkit-tap-highlight-color: transparent;
        }
        .main-circle:active { transform: scale(0.96); }
        .main-circle img { width: 85%; pointer-events: none; }

        /* Rocket Effect */
        .rocket-mode { border-color: var(--danger); box-shadow: 0 0 30px var(--danger); }

        /* Auto Bot Status */
        .bot-status {
            background: rgba(0, 191, 255, 0.1); border: 1px solid var(--primary);
            border-radius: 10px; padding: 10px; margin: 20px 0; font-size: 13px;
            display: flex; justify-content: space-between; align-items: center;
        }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%);
            width: 92%; max-width: 400px; background: rgba(27, 38, 59, 0.95);
            backdrop-filter: blur(10px); border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);
            display: flex; justify-content: space-around; padding: 10px; z-index: 99;
        }
        .nav-item { background: none; border: none; color: #666; font-size: 10px; cursor: pointer; display: flex; flex-direction: column; align-items: center; }
        .nav-item.active { color: var(--accent); }
        .nav-icon { font-size: 20px; margin-bottom: 3px; }

        /* Modals */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; justify-content: center; align-items: flex-end; }
        .modal-content { background: var(--card-bg); width: 100%; max-width: 500px; border-radius: 25px 25px 0 0; padding: 25px; max-height: 85vh; overflow-y: auto; color: #fff; border-top: 2px solid var(--primary); position: relative;}
        .close-btn { position: absolute; top: 15px; right: 15px; font-size: 24px; color: #aaa; cursor: pointer; }

        /* Buttons */
        .action-btn { width: 100%; padding: 12px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-primary { background: var(--primary); color: #000; }
        .btn-disabled { background: #444; color: #888; cursor: not-allowed; }
        .btn-getgems { background: linear-gradient(90deg, #007aff, #00c6ff); color: white; text-decoration: none; display: block; text-align: center; margin-top: 10px; border-radius: 10px; padding: 12px; font-weight: bold;}

        /* List Items */
        .list-item { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        
        /* Floating Text */
        .floating-text { position: absolute; color: var(--accent); font-weight: bold; font-size: 24px; pointer-events: none; animation: floatUp 0.8s forwards; }
        @keyframes floatUp { to { transform: translateY(-100px); opacity: 0; } }

        /* Explode Effect */
        @keyframes explode { 0% { transform: scale(1); } 50% { transform: scale(1.5); opacity: 0.5; } 100% { transform: scale(2); opacity: 0; } }
        .exploded { animation: explode 1s forwards; pointer-events: none; }

    </style>
</head>
<body>

    <div class="background-animation"></div>

    <div class="container">
        <h3 style="color: var(--accent); margin: 5px;">UKRAINIAN CYBORGS</h3>
        
        <div class="emission-text">–í–∏–¥–æ–±—É—Ç–æ: <span id="emissionVal">0</span>% (Global)</div>
        <div class="emission-bar"><div class="emission-fill" id="emissionBar"></div></div>

        <div class="balance-amount"><span id="balance">0</span></div>
        <div class="real-token-est">‚âà <span id="realTokenVal">0</span> UCBG (Real)</div>

        <div class="bot-status" id="botPanel" style="display:none;">
            <div>ü§ñ –ê–≤—Ç–æ-–ë–æ—Ç: <span id="botTimer">04:00:00</span></div>
            <button class="action-btn btn-primary" style="width: auto; padding: 5px 15px; font-size: 12px;" id="claimBotBtn" onclick="claimBot()">–ó–∞–±—Ä–∞—Ç–∏</button>
        </div>

        <div class="main-circle" id="tapButton">
            <img src="https://via.placeholder.com/250/0d1b2a/FFFFFF?text=CYBORG" alt="Cyborg">
        </div>

        <div style="margin-top: 20px; font-size: 14px; color: #888;">‚ö° <span id="energy">1000</span>/1000</div>
    </div>

    <div class="bottom-nav">
        <button class="nav-item active" onclick="closeModals()">
            <div class="nav-icon">üè†</div><span>–ì–æ–ª–æ–≤–Ω–∞</span>
        </button>
        <button class="nav-item" onclick="openModal('boostModal')">
            <div class="nav-icon">üöÄ</div><span>–ë—É—Å—Ç–∏</span>
        </button>
        <button class="nav-item" onclick="openModal('friendsModal')">
            <div class="nav-icon">üè¶</div><span>–ë–∞–Ω–∫</span>
        </button>
        <button class="nav-item" onclick="openModal('walletModal')">
            <div class="nav-icon">üíé</div><span>–í–∏–≤—ñ–¥</span>
        </button>
    </div>

    <div id="boostModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModals()">&times;</span>
            <h2>üöÄ –¶–µ–Ω—Ç—Ä –ü–æ–∫—Ä–∞—â–µ–Ω—å</h2>
            
            <div class="list-item">
                <div>
                    <h4>üöÄ –†–∞–∫–µ—Ç–∫–∞ (x5 –ö–ª—ñ–∫)</h4>
                    <p style="font-size: 11px; color: #aaa;">–î—ñ—î 10 —Å–µ–∫—É–Ω–¥</p>
                </div>
                <button class="action-btn btn-primary" style="width: 80px;" onclick="activateRocket()">Start</button>
            </div>

            <div class="list-item">
                <div>
                    <h4>ü§ñ –ê–≤—Ç–æ-–ë–æ—Ç 4h</h4>
                    <p style="font-size: 11px; color: #aaa;">–ó–±–∏—Ä–∞—î –ø–æ–∫–∏ —Ç–∏ —Å–ø–∏—à (4 –≥–æ–¥)</p>
                </div>
                <button class="action-btn btn-primary" style="width: 80px;" id="buyBotBtn" onclick="buyBot()">50k</button>
            </div>

            <div class="list-item">
                <div><h4>‚ö° –ï–Ω–µ—Ä–≥—ñ—è (+500)</h4></div>
                <button class="action-btn btn-primary" style="width: 80px;" onclick="upgradeEnergy()">5k</button>
            </div>
        </div>
    </div>

    <div id="friendsModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModals()">&times;</span>
            <h2>üè¶ –ë–∞–Ω–∫—ñ–≤—Å—å–∫–∞ –§—ñ–ª—ñ—è</h2>
            <p style="text-align: center; color: #aaa; font-size: 12px;">–ó–∞–ø—Ä–æ—à—É–π –ø–∞—Ä—Ç–Ω–µ—Ä—ñ–≤ —Ç–∞ –æ—Ç—Ä–∏–º—É–π –¥–∏–≤—ñ–¥–µ–Ω–¥–∏</p>

            <div style="background: rgba(255,215,0,0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
                <div class="list-item" style="background: none; margin: 0; padding: 5px;">
                    <span>üë§ –ó–≤–∏—á–∞–π–Ω–∏–π</span>
                    <span style="color: var(--accent);">+2,500 UCBG</span>
                </div>
                <div class="list-item" style="background: none; margin: 0; padding: 5px;">
                    <span>üåü Premium</span>
                    <span style="color: var(--accent);">+25,000 UCBG</span>
                </div>
            </div>

            <button class="action-btn btn-primary" onclick="inviteFriend()">üîó –°—Ç–≤–æ—Ä–∏—Ç–∏ –†–µ—Ñ. –ü–æ—Å–∏–ª–∞–Ω–Ω—è</button>
        </div>
    </div>

    <div id="walletModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModals()">&times;</span>
            <h2>üíé –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è & –í–∏–≤—ñ–¥</h2>
            
            <div id="ton-connect-button" style="width: 100%; display: flex; justify-content: center; margin-bottom: 20px;"></div>

            <p style="font-size: 12px; color: #aaa;">–û—Ñ—ñ—Ü—ñ–π–Ω–∞ –∫–æ–ª–µ–∫—Ü—ñ—è:</p>
            <a href="https://getgems.io/ucbgcoin" target="_blank" class="btn-getgems">üìÇ –í—ñ–¥–∫—Ä–∏—Ç–∏ Getgems –ö–æ–ª–µ–∫—Ü—ñ—é</a>
            
            <p style="font-size: 12px; color: #aaa; margin-top: 15px;">–ü—Ä–∏–∫–ª–∞–¥ NFT (–°—Ö–æ–≤–∏—â–µ):</p>
            <a href="https://getgems.io/collection/EQBiMglpS3o2nMB89NS0Wp6wgqacaOhT0QdZgQ_svTlhTdsO/EQBnuEpHT79-cv1fXDk9chLlw8IvXWVUW_Oq5K9lDRYqFUa2" target="_blank" style="color: var(--primary); font-size: 12px;">üîó –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ NFT</a>

            <hr style="border-color: #333; margin: 20px 0;">

            <div style="text-align: center;">
                <h3 style="color: var(--accent);">–ì–ï–ù–ï–†–ê–¶–Ü–Ø UCBG</h3>
                <p style="font-size: 11px; color: #aaa;">
                    –ù–µ–æ–±—Ö—ñ–¥–Ω–æ 10 –º–ª–Ω —ñ–≥—Ä–æ–≤–∏—Ö –º–æ–Ω–µ—Ç –¥–ª—è 1 NFT (10,000 UCBG Real).
                    <br>–í–∏–≤—ñ–¥ –¥–æ—Å—Ç—É–ø–Ω–∏–π: NFT, Wallet, DEX.
                </p>
                
                <div id="withdrawLock" style="margin-top: 15px;">
                    <div style="font-size: 20px;">üîí</div>
                    <p id="timerText" style="color: var(--danger); font-size: 12px;">–í—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è 5 –ª—é—Ç–æ–≥–æ 2026</p>
                    <button class="action-btn btn-disabled" id="genButton" disabled>–ì–ï–ù–ï–†–£–í–ê–¢–ò</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø ---
        const TG = window.Telegram.WebApp;
        TG.expand();

        // –î–µ–¥–ª–∞–π–Ω–∏
        const START_DATE = new Date('2025-12-01T00:00:00'); // –°—Ç–∞—Ä—Ç –≥—Ä–∏
        const UNLOCK_DATE = new Date('2026-02-05T00:00:00'); // –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –≤–∏–≤–æ–¥—É
        
        // –ï–∫–æ–Ω–æ–º—ñ–∫–∞
        const MAX_GAME_EMISSION = 2000000000000; // 2 –¢—Ä–∏–ª—å–π–æ–Ω–∏ —ñ–≥—Ä–æ–≤–∏—Ö
        const REAL_TOKEN_RATIO = 1000; // 1000 —ñ–≥—Ä–æ–≤–∏—Ö = 1 Real UCBG
        // (10 –º–ª–Ω —ñ–≥—Ä–æ–≤–∏—Ö / 1000 = 10,000 Real UCBG = 1 NFT)

        // –°—Ç–∞–Ω –≥—Ä–∞–≤—Ü—è
        let state = {
            balance: 0,
            energy: 1000,
            maxEnergy: 1000,
            hasBot: false,
            botStartTime: 0,
            lastClickTime: 0,
            clickCount: 0 // –î–ª—è –∞–Ω—Ç–∏-—á—ñ—Ç–∞
        };

        // --- –õ–û–ì–Ü–ö–ê ---

        function init() {
            loadState();
            updateUI();
            checkWithdrawalDate();
            
            // –¢–∞–π–º–µ—Ä–∏
            setInterval(updateEnergy, 1000);
            setInterval(updateBotTimer, 1000);
            setInterval(checkAntiCheat, 2000); // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–∂–Ω—ñ 2 —Å–µ–∫
        }

        // –ö–ª—ñ–∫
        document.getElementById('tapButton').addEventListener('click', (e) => {
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –µ–º—ñ—Å—ñ—ó
            if (state.balance >= MAX_GAME_EMISSION) {
                endGame();
                return;
            }

            // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Å–∏–ª–∏
            let power = 1;
            const isRocket = document.getElementById('tapButton').classList.contains('rocket-mode');
            if (isRocket) power *= 5;

            if (state.energy >= power) {
                state.balance += power;
                state.energy -= power;
                state.clickCount++; // –õ—ñ—á–∏–ª—å–Ω–∏–∫ –¥–ª—è –∞–Ω—Ç–∏-—á—ñ—Ç–∞

                // –í—ñ–∑—É–∞–ª–∏
                const rect = e.target.getBoundingClientRect();
                const x = e.clientX || (rect.left + rect.width/2);
                const y = e.clientY || (rect.top + rect.height/2);
                showFloatingText(x, y, `+${power}`);
                
                if (TG.HapticFeedback) TG.HapticFeedback.impactOccurred('light');
                
                updateUI();
                saveState();
            }
        });

        // –ê–Ω—Ç–∏-–ß—ñ—Ç (–ü—Ä–æ—Å—Ç–∏–π)
        function checkAntiCheat() {
            // –Ø–∫—â–æ –±—ñ–ª—å—à–µ 30 –∫–ª—ñ–∫—ñ–≤ –∑–∞ 2 —Å–µ–∫—É–Ω–¥–∏ - –ø—ñ–¥–æ–∑—Ä—ñ–ª–æ (15 –∫–ª—ñ–∫—ñ–≤/—Å–µ–∫)
            if (state.clickCount > 30) {
                state.balance = 0; // –û–±–Ω—É–ª–µ–Ω–Ω—è
                TG.showAlert("üëÆ –í–∏—è–≤–ª–µ–Ω–æ –ø—ñ–¥–æ–∑—Ä—ñ–ª—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å! –ë–∞–ª–∞–Ω—Å –∞–Ω—É–ª—å–æ–≤–∞–Ω–æ. –ì—Ä–∞–π —á–µ—Å–Ω–æ.");
            }
            state.clickCount = 0; // –°–∫–∏–¥–∞–Ω–Ω—è –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞
        }

        // –ê–≤—Ç–æ-–ë–æ—Ç
        function buyBot() {
            if (state.balance >= 50000 && !state.hasBot) {
                state.balance -= 50000;
                state.hasBot = true;
                state.botStartTime = Date.now();
                document.getElementById('botPanel').style.display = 'flex';
                document.getElementById('buyBotBtn').textContent = '–ö—É–ø–ª–µ–Ω–æ';
                document.getElementById('buyBotBtn').disabled = true;
                saveState();
                updateUI();
            }
        }

        function updateBotTimer() {
            if (!state.hasBot) return;
            
            const now = Date.now();
            const diff = now - state.botStartTime;
            const fourHours = 4 * 60 * 60 * 1000;
            
            if (diff >= fourHours) {
                document.getElementById('botTimer').textContent = "–ì–æ—Ç–æ–≤–∏–π!";
                document.getElementById('botTimer').style.color = "#00FF00";
                document.getElementById('claimBotBtn').disabled = false;
            } else {
                const left = fourHours - diff;
                const h = Math.floor(left / (1000 * 60 * 60));
                const m = Math.floor((left % (1000 * 60 * 60)) / (1000 * 60));
                const s = Math.floor((left % (1000 * 60)) / 1000);
                document.getElementById('botTimer').textContent = `${h}:${m < 10 ? '0'+m : m}:${s < 10 ? '0'+s : s}`;
                document.getElementById('botTimer').style.color = "#fff";
                document.getElementById('claimBotBtn').disabled = true;
            }
        }

        function claimBot() {
            const reward = 10000; // –ù–∞–≥–æ—Ä–æ–¥–∞ –∑–∞ 4 –≥–æ–¥–∏–Ω–∏
            state.balance += reward;
            state.botStartTime = Date.now(); // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
            TG.showAlert(`ü§ñ –ë–æ—Ç –∑—ñ–±—Ä–∞–≤ ${reward} –º–æ–Ω–µ—Ç!`);
            updateUI();
            saveState();
        }

        // –ë—É—Å—Ç –†–∞–∫–µ—Ç–∫–∞
        function activateRocket() {
            const btn = document.getElementById('tapButton');
            btn.classList.add('rocket-mode');
            closeModals();
            setTimeout(() => {
                btn.classList.remove('rocket-mode');
            }, 10000); // 10 —Å–µ–∫—É–Ω–¥
        }

        // –ü—Ä–æ–∫–∞—á–∫–∞ –ï–Ω–µ—Ä–≥—ñ—ó
        function upgradeEnergy() {
            if (state.balance >= 5000) {
                state.balance -= 5000;
                state.maxEnergy += 500;
                updateUI();
                saveState();
            }
        }

        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–∞—Ç–∏ –≤–∏–≤–æ–¥—É
        function checkWithdrawalDate() {
            const now = new Date();
            const btn = document.getElementById('genButton');
            const txt = document.getElementById('timerText');
            
            if (now >= UNLOCK_DATE) {
                btn.disabled = false;
                btn.classList.remove('btn-disabled');
                btn.classList.add('btn-primary');
                btn.onclick = () => TG.showAlert("–û–±–µ—Ä—ñ—Ç—å –º–µ—Ç–æ–¥: NFT, –ì–∞–º–∞–Ω–µ—Ü—å –∞–±–æ DEX");
                txt.textContent = "‚úÖ –í–∏–≤—ñ–¥ –≤—ñ–¥–∫—Ä–∏—Ç–æ!";
                txt.style.color = "#00FF00";
            }
        }

        // –†–µ—Ñ–µ—Ä–∞–ª–∏
        function inviteFriend() {
            const userId = TG.initDataUnsafe?.user?.id || '0';
            const url = `https://t.me/ucbgcoin_bot?start=ref_${userId}`;
            const text = "–û—Ç—Ä–∏–º–∞–π 2500 UCBG! –ì—Ä–∞–π –≤ Ukrainian Cyborgs.";
            const shareUrl = `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;
            TG.openTelegramLink(shareUrl);
        }

        // –§—ñ–Ω–∞–ª –≥—Ä–∏
        function endGame() {
            document.getElementById('tapButton').classList.add('exploded');
            TG.showAlert("üí• –ï–º—ñ—Å—ñ—è –≤–∏—á–µ—Ä–ø–∞–Ω–∞! –ú–∞–π–Ω—ñ–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –û—á—ñ–∫—É–π—Ç–µ –ª—ñ—Å—Ç–∏–Ω–≥—É.");
        }

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
        function updateUI() {
            document.getElementById('balance').textContent = state.balance.toLocaleString();
            document.getElementById('energy').textContent = Math.floor(state.energy);
            
            // –†–µ–∞–ª—å–Ω—ñ —Ç–æ–∫–µ–Ω–∏
            const realTokens = Math.floor(state.balance / REAL_TOKEN_RATIO);
            document.getElementById('realTokenVal').textContent = realTokens.toLocaleString();

            // –ï–º—ñ—Å—ñ—è –ë–∞—Ä
            const percent = (state.balance / MAX_GAME_EMISSION) * 100;
            document.getElementById('emissionBar').style.width = `${percent}%`;
            document.getElementById('emissionVal').textContent = percent.toFixed(6);

            if(state.hasBot) document.getElementById('botPanel').style.display = 'flex';
        }

        function updateEnergy() {
            if (state.energy < state.maxEnergy) {
                state.energy += 2;
                updateUI();
            }
        }

        function showFloatingText(x, y, text) {
            const el = document.createElement('div');
            el.className = 'floating-text';
            el.textContent = text;
            el.style.left = `${x}px`;
            el.style.top = `${y}px`;
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 800);
        }

        // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è
        function saveState() {
            localStorage.setItem('ucbg_v3', JSON.stringify(state));
        }
        function loadState() {
            const saved = localStorage.getItem('ucbg_v3');
            if (saved) state = { ...state, ...JSON.parse(saved) };
        }

        // –ú–æ–¥–∞–ª–∫–∏
        window.openModal = (id) => document.getElementById(id).style.display = 'flex';
        window.closeModals = () => document.querySelectorAll('.modal').forEach(el => el.style.display = 'none');

        // –°—Ç–∞—Ä—Ç
        init();
    </script>
</body>
</html>
