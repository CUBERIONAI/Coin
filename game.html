<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ukrainian Cyborgs</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <style>
        /* --- CYBER-WAR STYLE --- */
        :root {
            --primary: #00BFFF; --accent: #FFD700; --bg-dark: #050505;
            --card-bg: #121212; --danger: #ff3b30; --success: #32d74b;
            --boost-bg: radial-gradient(circle, #2a0a0a 0%, #000 90%);
        }

        body {
            font-family: 'Courier New', monospace; background: var(--bg-dark);
            color: #fff; margin: 0; padding: 0; display: flex; flex-direction: column;
            align-items: center; height: 100vh; overflow: hidden; user-select: none;
            -webkit-tap-highlight-color: transparent; padding-bottom: 90px;
            transition: background 0.5s;
        }

        /* –§–û–ù */
        .bg-fx {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, #0a1a2a 0%, #000000 90%);
            z-index: -2; transition: opacity 0.5s;
        }
        .bg-boost {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--boost-bg); z-index: -1; opacity: 0; transition: opacity 0.5s;
        }

        /* SQUAD BAR */
        .squad-bar {
            width: 96%; background: rgba(20,20,20,0.9); border: 1px solid #333;
            border-radius: 0 0 15px 15px; padding: 10px 15px; font-size: 12px;
            display: flex; justify-content: space-between; align-items: center;
            box-sizing: border-box; margin-bottom: 5px; z-index: 10; cursor: pointer;
        }

        /* MAIN UI */
        .container { width: 100%; max-width: 420px; padding: 5px 10px; box-sizing: border-box; text-align: center; z-index: 1; }
        h1 { font-family: sans-serif; font-size: 18px; margin: 5px 0; text-shadow: 0 0 10px rgba(255,255,255,0.2); }
        
        .balance-val { font-size: 40px; font-weight: 800; font-family: sans-serif; margin-top: 5px; text-shadow: 0 0 15px rgba(0,191,255,0.4); }
        .balance-sub { font-size: 12px; color: #888; }

        /* TRIDENT BUTTON */
        .clicker-area { flex-grow: 1; display: flex; justify-content: center; align-items: center; margin: 10px 0; position: relative; }
        .main-btn {
            width: 260px; height: 260px; border-radius: 50%;
            background: radial-gradient(circle, #102030, #000);
            border: 3px solid #222; box-shadow: 0 0 20px rgba(0,191,255,0.1);
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; position: relative; overflow: hidden; transition: transform 0.05s;
        }
        .main-btn:active { transform: scale(0.96); border-color: var(--accent); }
        .trident-svg { width: 65%; height: 65%; filter: drop-shadow(0 0 10px var(--primary)); }
        
        /* ENERGY */
        .energy-bar { width: 100%; height: 8px; background: #222; border-radius: 4px; overflow: hidden; margin-top: 10px; }
        .energy-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--accent)); width: 100%; transition: width 0.3s; }
        .energy-info { font-size: 11px; color: #888; margin-top: 4px; display: flex; justify-content: space-between; }

        /* NAV BAR */
        .nav-bar {
            position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%);
            width: 96%; max-width: 420px; background: rgba(15, 15, 15, 0.95);
            backdrop-filter: blur(10px); border-radius: 20px; border: 1px solid #333;
            display: flex; justify-content: space-between; padding: 8px 10px; z-index: 100; box-sizing: border-box;
        }
        .nav-btn { background: none; border: none; color: #666; font-size: 9px; display: flex; flex-direction: column; align-items: center; width: 19%; cursor: pointer; }
        .nav-btn.active { color: var(--accent); }
        .nav-icon { font-size: 20px; margin-bottom: 3px; }

        /* MODALS */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; justify-content: center; align-items: flex-end; }
        .modal-card { background: var(--card-bg); width: 100%; max-width: 500px; border-radius: 25px 25px 0 0; padding: 20px; max-height: 85vh; overflow-y: auto; border-top: 2px solid var(--primary); box-sizing: border-box; }
        .close-btn { float: right; font-size: 24px; color: #666; cursor: pointer; }
        
        /* ELEMENTS */
        .list-item { display: flex; justify-content: space-between; align-items: center; background: #1a1a1a; padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 1px solid #2a2a2a; }
        .btn { background: var(--primary); color: #000; border: none; padding: 8px 12px; border-radius: 8px; font-weight: bold; font-size: 12px; cursor: pointer; }
        .btn:disabled { background: #333; color: #555; cursor: not-allowed; }
        .btn-lg { width: 100%; padding: 12px; margin-top: 10px; }
        
        /* GIFT ANIMATION */
        #gift-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 3000; display: none; justify-content: center; align-items: center; flex-direction: column; }
        .gift-box { font-size: 80px; animation: bounce 1s infinite; cursor: pointer; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        .gift-open { font-size: 80px; animation: pop 0.5s forwards; }
        @keyframes pop { 0% { transform: scale(0); } 100% { transform: scale(1.2); } }

        /* PRESALE INPUT */
        .input-group { background: #000; padding: 15px; border-radius: 12px; border: 1px solid var(--accent); margin-bottom: 15px; }
        .input-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .input-field { background: none; border: none; color: #fff; font-size: 20px; width: 100px; text-align: right; outline: none; }

        /* EFFECTS */
        .floating-txt { position: absolute; color: #fff; font-weight: bold; font-size: 28px; pointer-events: none; animation: float 0.7s forwards; z-index: 10; text-shadow: 0 0 5px var(--primary); }
        @keyframes float { to { transform: translateY(-80px); opacity: 0; } }
        .rocket-active { border-color: var(--danger) !important; box-shadow: 0 0 50px var(--danger) !important; }

    </style>
</head>
<body>

    <div id="gift-layer" onclick="openGift()">
        <div id="gift-icon" class="gift-box">üéÅ</div>
        <div id="gift-text" style="margin-top:20px; color:var(--accent);">TAP TO OPEN</div>
    </div>

    <div class="bg-fx"></div>
    <div class="bg-boost" id="bgBoost"></div>

    <div class="squad-bar" onclick="openLink('https://t.me/ucbgcoin')">
        <span>üõ°Ô∏è –õ—ñ–¥–µ—Ä: <span class="squad-name">@ucbgcoin</span></span>
        <span style="color:var(--primary)">Team ></span>
    </div>

    <div class="container">
        <h1>UKRAINIAN CYBORGS</h1>
        
        <div class="balance-wrap">
            <div class="balance-val" id="displayBalance">0</div>
            <div class="balance-sub">UCBG COIN</div>
        </div>

        <div class="clicker-area">
            <div class="main-btn" id="tapBtn">
                <svg class="trident-svg" viewBox="0 0 512 512">
                    <defs>
                        <linearGradient id="g1" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#00BFFF;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#FFD700;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path fill="url(#g1)" d="M256 32C242.7 32 232 42.7 232 56V192C232 222.9 206.9 248 176 248C145.1 248 120 222.9 120 192V88C120 74.7 109.3 64 96 64C82.7 64 72 74.7 72 88V192C72 249.4 118.6 296 176 296H200V424H152C138.7 424 128 434.7 128 448C128 461.3 138.7 472 152 472H360C373.3 472 384 461.3 384 448C384 434.7 373.3 424 360 424H312V296H336C393.4 296 440 249.4 440 192V88C440 74.7 429.3 64 416 64C402.7 64 392 74.7 392 88V192C392 222.9 366.9 248 336 248C305.1 248 280 222.9 280 192V56C280 42.7 269.3 32 256 32z"/>
                </svg>
            </div>
        </div>

        <div class="energy-bar"><div class="energy-fill" id="energyFill"></div></div>
        <div class="energy-info">
            <span id="turboText" style="color:var(--danger); display:none;">üî• x<span id="boostMult">10</span> BOOST</span>
            <span>‚ö° <span id="enVal">1000</span> / <span id="enMax">1000</span></span>
        </div>
    </div>

    <div class="nav-bar">
        <button class="nav-btn active" onclick="closeModals()"><div class="nav-icon">üè†</div>Base</button>
        <button class="nav-btn" onclick="openModal('upgModal')"><div class="nav-icon">üõ†</div>Upg</button>
        <button class="nav-btn" onclick="openModal('presaleModal')"><div class="nav-icon">üí†</div>Presale</button>
        <button class="nav-btn" onclick="openModal('earnModal')"><div class="nav-icon">üìã</div>Task</button>
        <button class="nav-btn" onclick="openModal('walletModal')"><div class="nav-icon">üíé</div>Wallet</button>
    </div>

    <div id="upgModal" class="modal">
        <div class="modal-card">
            <span class="close-btn" onclick="closeModals()">&times;</span>
            <h2>–ê–†–°–ï–ù–ê–õ</h2>
            
            <div class="list-item" style="border-color:var(--danger)">
                <div>
                    <div style="color:var(--danger); font-weight:bold;">üéÅ –†–∞–Ω–¥–æ–º-–ë—É—Å—Ç</div>
                    <div style="font-size:10px; color:#888;" id="boostsLeft">3/3 today</div>
                </div>
                <button class="btn" onclick="tryBoost()" id="rocketBtn" style="background:var(--danger); color:#fff;">OPEN</button>
            </div>

            <div class="list-item" style="border-color:var(--primary)">
                <div>
                    <div style="color:var(--primary); font-weight:bold;">ü§ñ –ê–≤—Ç–æ-–ë–æ—Ç</div>
                    <div style="font-size:10px; color:#888;">4 –≥–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏</div>
                </div>
                <button class="btn" id="buyBotBtn" onclick="buyBot()">50k</button>
            </div>

            <h3 style="font-size:12px; margin:15px 0 5px 0; color:#666;">–ë–ê–ó–û–í–Ü (–í–ò–¢–†–ê–¢–ò –ó–ì–û–†–ê–Æ–¢–¨)</h3>
            <div id="upgradesList"></div>
        </div>
    </div>

    <div id="presaleModal" class="modal">
        <div class="modal-card">
            <span class="close-btn" onclick="closeModals()">&times;</span>
            <h2>PRESALE & STAKING</h2>
            <p style="font-size:12px; color:#aaa; margin-bottom:20px;">
                –°—Ç–µ–π–∫—ñ–Ω–≥ TON. –û–±–º—ñ–Ω—è–π TON –Ω–∞ UCBG.<br>
                <span style="color:var(--accent)">1 UCBG (Real) = $1</span>
            </p>

            <div class="input-group">
                <div class="input-row">
                    <span>–°—Ç–µ–π–∫—ñ–Ω–≥ (TON)</span>
                    <input type="number" id="tonInput" class="input-field" value="1" oninput="calcPresale()">
                </div>
                <hr style="border-color:#333; margin:10px 0;">
                <div class="input-row">
                    <span>–û—Ç—Ä–∏–º–∞—î—à (UCBG)</span>
                    <span id="ucbgOutput" style="font-size:20px; font-weight:bold; color:var(--accent)">5</span>
                </div>
            </div>
            
            <div id="ton-connect-presale" style="margin: 15px 0; width:100%; display:flex; justify-content:center;"></div>
            <button class="btn btn-lg" onclick="buyPresale()">–°–¢–ï–ô–ö–Ü–ù–ì (BUY)</button>
            <p style="font-size:10px; color:#444; text-align:center; margin-top:10px;">–ú–æ–Ω–µ—Ç–∏ –∑–∞—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è –Ω–∞ –±–∞–ª–∞–Ω—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.</p>
        </div>
    </div>

    <div id="earnModal" class="modal">
        <div class="modal-card">
            <span class="close-btn" onclick="closeModals()">&times;</span>
            <h2>–ó–ê–í–î–ê–ù–ù–Ø</h2>
            
            <div class="list-item" style="background:rgba(0,191,255,0.1); border-color:var(--primary);">
                <div style="width:60%">
                    <div style="font-weight:bold;">–ü—ñ–¥–ø–∏—Å–∫–∞</div>
                    <div style="font-size:10px; color:#aaa;">@ucbgcoin</div>
                </div>
                <div style="text-align:right">
                    <div style="color:var(--accent); font-size:12px;">+1M</div>
                    <button class="btn" id="subBtn" onclick="checkSub()">Go</button>
                </div>
            </div>

             <div class="list-item">
                <div>–ó–∞–ø—Ä–æ—Å–∏ –¥—Ä—É–≥–∞</div>
                <button class="btn" onclick="invite()">+2500</button>
            </div>
        </div>
    </div>

    <div id="walletModal" class="modal">
        <div class="modal-card">
            <span class="close-btn" onclick="closeModals()">&times;</span>
            <h2>–í–ò–í–Ü–î</h2>
            <p style="text-align:center; color:#888; font-size:12px;">–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞</p>
            
            <button class="btn btn-lg" style="background:#222; color:#888; cursor:not-allowed;">–ì–ï–ù–ï–†–£–í–ê–¢–ò –ù–§–¢</button>
            <p style="text-align:center; margin-top:10px; font-size:11px; color:#555;">üîí –ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ –¥–æ 05.02.2026</p>

            <div style="margin-top:30px; padding-top:20px; border-top:1px solid #333;">
                <div style="font-size:12px; color:#aaa; margin-bottom:5px;">–ö–æ–Ω—Ç—Ä–∞–∫—Ç UCBG:</div>
                <div style="background:#000; padding:10px; border-radius:8px; font-size:10px; word-break:break-all; color:#fff;">
                    EQDEKujB04BTPGTxzrLyMwnj8JJjcKL9fAHxFjUZELytL--g
                </div>
            </div>
            <a href="https://getgems.io/collection/ucgbcoin" target="_blank" class="btn btn-lg" style="margin-top:15px; background:#007aff; text-decoration:none; display:block; text-align:center;">üìÇ GETGEMS –ö–û–õ–ï–ö–¶–Ü–Ø</a>
        </div>
    </div>

    <script>
        // --- CONFIG ---
        const TG = window.Telegram.WebApp;
        TG.expand(); TG.setHeaderColor('#050505');
        
        const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
            manifestUrl: 'https://raw.githubusercontent.com/ton-community/tutorials/main/03-client/test/public/tonconnect-manifest.json',
            buttonRootId: 'ton-connect-presale'
        });

        const OWNER_WALLET = "UQCT58CCHhHD9EuKlAVaZYlICdnbRdrhtWaVzl_CBqoZHEUP";
        const RATE_REAL = 5; // 1 TON = 5 UCBG (Real)
        const PRESALE_RATE = 50000; // 1 TON = 50,000 Game Coins

        // --- STATE ---
        let state = {
            balance: 0, energy: 1000, totalMined: 0,
            turboEnd: 0, turboMult: 1,
            dailyBoosts: 3, lastBoostDate: 0,
            hasBot: false, botStart: 0,
            subClaimed: false,
            upgrades: {
                tap: { lvl: 1, base: 500, factor: 2, name: "–ú—É–ª—å—Ç–∏—Ç–∞–ø" },
                eng: { lvl: 1, base: 500, factor: 2, name: "–ï–Ω–µ—Ä–≥—ñ—è" },
                reg: { lvl: 1, base: 1000, factor: 2.5, name: "–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è" }
            }
        };

        // --- INIT ---
        function init() {
            loadState();
            
            // Daily Reset
            const today = new Date().getDate();
            if(state.lastBoostDate !== today) {
                state.dailyBoosts = 3;
                state.lastBoostDate = today;
                saveState();
            }

            updateUI();
            renderUpgrades();
            
            // Loops
            setInterval(() => { regenEnergy(); updateBot(); checkTurbo(); }, 1000);
        }

        // --- LOGIC ---
        document.getElementById('tapBtn').addEventListener('touchstart', tap, {passive:false});
        document.getElementById('tapBtn').addEventListener('click', tap);

        function tap(e) {
            if(e.type==='touchstart') e.preventDefault();
            
            let power = 1 + (state.upgrades.tap.lvl - 1);
            if(Date.now() < state.turboEnd) power *= state.turboMult;

            if(state.energy >= power) {
                state.balance += power;
                state.energy -= power;
                if(TG.HapticFeedback) TG.HapticFeedback.impactOccurred('light');
                
                // FX
                let x = e.clientX || e.touches[0].clientX;
                let y = e.clientY || e.touches[0].clientY;
                showFloat(x, y, `+${power}`);
                
                updateUI(); saveState();
            }
        }

        function showFloat(x, y, txt) {
            let el = document.createElement('div');
            el.className = 'floating-txt'; el.innerText = txt;
            el.style.left = (x-20)+'px'; el.style.top = (y-40)+'px';
            document.body.appendChild(el);
            setTimeout(()=>el.remove(), 700);
        }

        // --- BOOST SYSTEM (RANDOM) ---
        function tryBoost() {
            if(state.dailyBoosts <= 0) { TG.showAlert("–ù–∞ —Å—å–æ–≥–æ–¥–Ω—ñ –ª—ñ–º—ñ—Ç –≤–∏—á–µ—Ä–ø–∞–Ω–æ!"); return; }
            
            // Show Gift Animation
            document.getElementById('gift-layer').style.display = 'flex';
            document.getElementById('gift-icon').className = 'gift-box';
            document.getElementById('gift-text').innerText = "TAP TO OPEN";
            closeModals();
        }

        function openGift() {
            const layer = document.getElementById('gift-layer');
            const icon = document.getElementById('gift-icon');
            const txt = document.getElementById('gift-text');
            
            if(icon.classList.contains('gift-open')) return; // Already opened

            icon.className = 'gift-open';
            
            // Random Logic
            const rand = Math.random();
            let mult = 2;
            if(rand > 0.5) mult = 5;
            if(rand > 0.8) mult = 10;
            if(rand > 0.95) mult = 20;
            
            txt.innerText = `x${mult} BOOSTER!`;
            
            setTimeout(() => {
                layer.style.display = 'none';
                icon.className = 'gift-box'; // Reset
                activateBoost(mult);
            }, 2000);
        }

        function activateBoost(mult) {
            state.dailyBoosts--;
            state.turboMult = mult;
            state.turboEnd = Date.now() + 10000; // 10 sec
            document.getElementById('bgBoost').style.opacity = '1';
            document.getElementById('tapBtn').classList.add('rocket-active');
            updateUI(); saveState();
        }

        function checkTurbo() {
            if(Date.now() >= state.turboEnd) {
                document.getElementById('bgBoost').style.opacity = '0';
                document.getElementById('tapBtn').classList.remove('rocket-active');
                document.getElementById('turboText').style.display = 'none';
            } else {
                document.getElementById('turboText').style.display = 'block';
                document.getElementById('boostMult').innerText = state.turboMult;
            }
        }

        // --- PRESALE ---
        function calcPresale() {
            let val = document.getElementById('tonInput').value;
            document.getElementById('ucbgOutput').innerText = (val * 5).toFixed(1); // 1 TON = 5 UCBG
        }

        async function buyPresale() {
            const amount = document.getElementById('tonInput').value;
            if(amount < 0.1) return TG.showAlert("–ú—ñ–Ω. —Å—É–º–∞ 0.1 TON");
            
            const transaction = {
                validUntil: Math.floor(Date.now() / 1000) + 600,
                messages: [{
                    address: OWNER_WALLET,
                    amount: (amount * 1000000000).toString()
